{"version":3,"file":"context.js","sources":["../../src/optimistic/context.ts"],"sourcesContent":["import {createEmptyActor, type ActorRefFrom} from 'xstate'\nimport {createDatasetMutator} from './state/datasetMutator'\n\nexport type MutatorActor = ActorRefFrom<ReturnType<typeof createDatasetMutator>>\nexport type EmptyActor = typeof emptyActor\n\nexport const emptyActor = createEmptyActor()\n\nexport let actor: MutatorActor | EmptyActor = emptyActor\n\nexport const listeners = new Set<() => void>()\n\nexport function isEmptyActor(actor: MutatorActor | EmptyActor): actor is EmptyActor {\n  return actor === emptyActor\n}\n\nexport function setActor(nextActor: MutatorActor): void {\n  actor = nextActor\n  for (const onActorChange of listeners) {\n    onActorChange()\n  }\n}\n"],"names":["emptyActor","createEmptyActor","actor","listeners","Set","isEmptyActor","setActor","nextActor","onActorChange"],"mappings":"0CAMO,MAAMA,EAAaC,IAEnB,IAAIC,EAAmCF,EAEjCG,MAAAA,MAAgBC,IAEtB,SAASC,EAAaH,GAC3B,OAAOA,IAAUF,CACnB,CAEO,SAASM,EAASC,GACfA,EAAAA,EACR,IAAA,MAAWC,KAAiBL,EACZK,GAElB"}