{"version":3,"file":"context.cjs","sources":["../../src/optimistic/context.ts"],"sourcesContent":["import {createEmptyActor, type ActorRefFrom} from 'xstate'\nimport {createDatasetMutator} from './state/datasetMutator'\n\nexport type MutatorActor = ActorRefFrom<ReturnType<typeof createDatasetMutator>>\nexport type EmptyActor = typeof emptyActor\n\nexport const emptyActor = createEmptyActor()\n\nexport let actor: MutatorActor | EmptyActor = emptyActor\n\nexport const listeners = new Set<() => void>()\n\nexport function isEmptyActor(actor: MutatorActor | EmptyActor): actor is EmptyActor {\n  return actor === emptyActor\n}\n\nexport function setActor(nextActor: MutatorActor): void {\n  actor = nextActor\n  for (const onActorChange of listeners) {\n    onActorChange()\n  }\n}\n"],"names":["emptyActor","createEmptyActor","actor","listeners","Set","exports","e","i","l","s","nextActor","onActorChange"],"mappings":"aAMO,MAAMA,oBAA8BC,mBAEhCC,QAAAA,EAAmCF,EAEjCG,MAAAA,MAAgBC,IAW7BC,QAAAC,EAAAN,EAAAK,QAAAE,EATO,SAAsBL,GAC3B,OAAOA,IAAUF,CACnB,EAOAK,QAAAG,EAAAL,EAAAE,QAAAI,EALO,SAAkBC,GACfA,QAAAA,EAAAA,EACR,IAAA,MAAWC,KAAiBR,EACZQ,GAElB"}